
    {% assign title_class = block.settings.heading_type %}

    {%- assign text_column_count = 0 -%}
    {%- assign column_1_enabled = false -%}
    {%- assign column_2_enabled = false -%}
    {%- assign column_3_enabled = false -%}
    {%- assign column_4_enabled = false -%}
    {% if block.settings.enable_image_1 or block.settings.title_1 != blank or block.settings.text_1 != blank %}
      {%- assign column_1_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_2 or block.settings.title_2 != blank or block.settings.text_2 != blank %}
      {%- assign column_2_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_3 or block.settings.title_3 != blank or block.settings.text_3 != blank %}
      {%- assign column_3_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_4 or block.settings.title_4 != blank or block.settings.text_4 != blank %}
      {%- assign column_4_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}

    {% case text_column_count %}
      {% when 1 %}
        {%- assign grid_item_width = '' -%}
        {%- assign width_multiplier = 1 -%}
      {% when 2 %}
        {%- assign grid_item_width = '1/2--tablet-and-up' -%}
        {%- assign width_multiplier = 0.5 -%}
      {% when 3 %}
        {%- assign grid_item_width = '1/3--tablet-and-up' -%}
        {%- assign width_multiplier = 0.33 -%}
      {% when 4 %}
        {%- assign grid_item_width = '1/4--tablet-and-up' -%}
        {%- assign width_multiplier = 0.25 -%}
    {% endcase %}


<div class="container text-center">
  {% if block.settings.title != blank or block.settings.lead != blank %}
    <div class="page-block__header">
      {% if block.settings.title != blank %}

        <h2 class="{% if block.settings.enlarge_text %}u-h1{% else %}u-h2{% endif %} Heading page-block__heading">{{ block.settings.title }}</h2>

      {% endif %}

      {% if block.settings.lead != blank %}
        <div class="Rte Grid grid--no-gutters page-block__intro">
          <div class="{% if block.settings.enlarge_text %}enlarge-text{% else %}larger-text{% endif %} Grid__Cell Grid--center 2/3--tablet-and-up">
            {{ block.settings.lead }}
          </div>
        </div>
      {% endif %}


    </div>
  {% endif %}


  {% if text_column_count == 2 %}
   <div class="Grid">
     <div class="Grid__Cell Grid--center 3/4--tablet-and-up">

 {% endif %}

  <div class="Grid page-block__content text-{{ block.settings.align_text }}">
    {% if column_1_enabled %}
      <{%- if block.settings.button_link_1 != blank -%}
      a href="{{ block.settings.button_link_1 }}"
      {%- else %}div
      {% endif %} class="Grid__Cell {{ grid_item_width }}">
        {% if block.settings.enable_image_1 %}

          <div class="page-block__image">
            {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, focal: block.settings.image_crop_1, image: block.settings.image_1 %}
          </div>

        {% endif %}
        {% if block.settings.title_1 != blank %}
          <h4 class="Heading {{ title_class }}">{{ block.settings.title_1 }}</h4>
        {% endif %}
        {% if block.settings.text_1 != blank %}
          <div class="Rte">{{ block.settings.text_1 }}</div>
        {% endif %}
        {% if block.settings.button_label_1 != blank and block.settings.button_link_1 != blank %}
          <span class="Button Button--full Button--primary">{{ block.settings.button_label_1 }}</span>
        {% endif %}
      </{% if block.settings.button_link_1 != blank %}a{% else %}div{% endif %}>
    {% endif %}

    {% if column_2_enabled %}
      <{%- if block.settings.button_link_2 != blank -%}
      a href="{{ block.settings.button_link_2 }}"
      {%- else -%}
      div
      {% endif %} class="Grid__Cell {{ grid_item_width }}">
        {% if block.settings.enable_image_2 %}

          <div class="page-block__image">
            {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, focal: block.settings.image_crop_2, image: block.settings.image_2 %}
          </div>

        {% endif %}
        {% if block.settings.title_2 != blank %}
          <h4 class="Heading {{ title_class }}">{{ block.settings.title_2 }}</h4>
        {% endif %}
        {% if block.settings.text_2 != blank %}
          <div class="Rte">{{ block.settings.text_2 }}</div>
        {% endif %}
        {% if block.settings.button_label_2 != blank and block.settings.button_link_2 != blank %}
          <span href="{{ block.settings.button_link_2 }}" class="Button Button--full Button--primary">{{ block.settings.button_label_2 }}</span>
        {% endif %}
      </{% if block.settings.button_link_2 != blank %}a{% else %}div{% endif %}>
    {% endif %}

    {% if column_3_enabled %}
      <{%- if block.settings.button_link_3 != blank -%}
      a href="{{ block.settings.button_link_3 }}"
      {%- else -%}
      div
      {% endif %} class="Grid__Cell {{ grid_item_width }}">
        {% if block.settings.enable_image_3 %}

          <div class="page-block__image">
            {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, focal: block.settings.image_crop_3, image: block.settings.image_3 %}
          </div>

        {% endif %}
        {% if block.settings.title_3 != blank %}
          <h4 class="Heading {{ title_class }}">{{ block.settings.title_3 }}</h4>
        {% endif %}
        {% if block.settings.text_3 != blank %}
          <div class="Rte">{{ block.settings.text_3 }}</div>
        {% endif %}
        {% if block.settings.button_label_3 != blank and block.settings.button_link_3 != blank %}
          <span href="{{ block.settings.button_link_3 }}" class="Button Button--full Button--primary">{{ block.settings.button_label_3 }}</span>
        {% endif %}
      </{% if block.settings.button_link_3 != blank %}a{% else %}div{% endif %}>
    {% endif %}

    {% if column_4_enabled %}
      <{%- if block.settings.button_link_4 != blank -%}
      a href="{{ block.settings.button_link_4 }}"
      {%- else -%}
      div
      {% endif %} class="Grid__Cell {{ grid_item_width }}" data-aos="row-of-4">
        {% if block.settings.enable_image_4 %}

          <div class="page-block__image">
            {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, focal: block.settings.image_crop_4, image: block.settings.image_4 %}
          </div>

        {% endif %}
        {% if block.settings.title_4 != blank %}
          <h4 class="Heading {{ title_class }}">{{ block.settings.title_4 }}</h4>
        {% endif %}
        {% if block.settings.text_4 != blank %}
          <div class="Rte">{{ block.settings.text_4 }}</div>
        {% endif %}
        {% if block.settings.button_label_4 != blank and block.settings.button_link_4 != blank %}
          <span href="{{ block.settings.button_link_4 }}" class="Button Button--full Button--primary">{{ block.settings.button_label_4 }}</span>
        {% endif %}
      </{% if block.settings.button_link_4 != blank %}a{% else %}div{% endif %}>
    {% endif %}

  {% if text_column_count == 2 %}
    </div>
  </div>
  {% endif %}

  </div>
</div>
