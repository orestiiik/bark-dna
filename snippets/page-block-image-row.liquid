{%- assign column_count = 0 -%}
{% if block.settings.image_1 %}
  {%- assign column_count = column_count | plus: 1 -%}
{% endif %}
{% if block.settings.image_2 %}
  {%- assign column_count = column_count | plus: 1 -%}
{% endif %}
{% if block.settings.image_3 %}
  {%- assign column_count = column_count | plus: 1 -%}
{% endif %}
{% if block.settings.image_4 %}
  {%- assign column_count = column_count | plus: 1 -%}
{% endif %}

{% case column_count %}
  {% when 1 %}
    {%- assign grid_item_width = '' -%}
    {%- assign width_multiplier = 1 -%}
  {% when 2 %}
    {%- assign grid_item_width = '1/2--tablet-and-up' -%}
    {%- assign width_multiplier = 0.5 -%}
  {% when 3 %}
    {%- assign grid_item_width = '1/3--tablet-and-up' -%}
    {%- assign width_multiplier = 0.33 -%}
  {% when 4 %}
    {%- assign grid_item_width = '1/4--tablet-and-up' -%}
    {%- assign width_multiplier = 0.25 -%}
  {% else %}
    {%- assign grid_item_width = '1/3--tablet-and-up' -%}
    {%- assign width_multiplier = 0.33 -%}
{% endcase %}

<div {% unless block.settings.full_width %}class="container"{% endunless %}>
  <div class="Grid {% unless block.settings.enable_gutter %}grid--no-gutters{% endunless %}">
    {% if block.settings.image_1 == blank and block.settings.image_2 == blank and block.settings.image_3 == blank and block.settings.image_4 == blank %}
      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: blank %}
      </div>

      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: blank %}
      </div>

      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: blank %}
      </div>
    {% endif %}

    {% if block.settings.image_1 %}
      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: block.settings.image_1 %}
      </div>
    {% endif %}
    {% if block.settings.image_2 %}
      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: block.settings.image_2 %}
      </div>
    {% endif %}
    {% if block.settings.image_3 %}
      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: block.settings.image_3 %}
      </div>
    {% endif %}
    {% if block.settings.image_4 %}
      <div class="page-block__image Grid__Cell {{ grid_item_width }}">
        {% include "image-lazyload", of_width: width_multiplier, ratio: block.settings.image_ratio, image: block.settings.image_4 %}
      </div>
    {% endif %}
  </div>
</div>

{%- unless block.settings.enable_block_spacing -%}

<style>
  #page-block-{{ block.id }} {
    padding-top: 0;
    padding-bottom: 0;
  }
</style>

{%- endunless -%}
